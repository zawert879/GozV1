# Симулятор боя GOZ v1

Симулятор боевой системы для настольной ролевой игры GOZ v1.

## Установка

Требуется Node.js (версия 12 или выше).

```bash
npm install
```

## Запуск

```bash
npm run simulate
```

или

```bash
node combat_simulator.js
```

## Возможности

### Модели персонажей

- **Character** - базовый класс персонажа с характеристиками ST, DX, IQ, HT
- **createWarrior()** - создаёт воина (HP 40, меч, кольчуга)
- **createThief()** - создаёт вора (HP 34, кинжал, усиленная кожа)
- **createWeakBandit()** - создаёт слабого разбойника (HP 10, топор)
- **createWolf()** - создаёт волка (HP 10 для рядовых, HP 40 для героев)

### Симуляция боя

Симулятор автоматически:
- Определяет инициативу по DX
- Выполняет атаки и защиту
- Рассчитывает урон с учётом брони
- Применяет штрафы за ранения
- Обрабатывает критические успехи (3-4) и провалы (17-18)
- Ведёт лог боя
- Показывает финальную статистику

## Результаты симуляций

### Воин против 3 разбойников
- **Побед воина:** 10/10
- **Средняя длительность:** 10.9 раундов
- **Ударов до поражения воина:** ~9 ударов
- **Ударов до поражения разбойника:** 2-3 удара

### Характеристики живучести

**Персонажи героев (PC):**
- HP: 32-40
- Требуется 8-10 попаданий для поражения
- Пример: Воин с HP 40, получает ~4-5 урона за удар

**Рядовые враги (minions):**
- HP: 10
- Требуется 2-3 попадания для поражения
- Быстро устраняются, создают динамичные бои

## Использование в игре

Используйте симулятор для:
- Балансировки встреч
- Тестирования новых персонажей
- Оценки сложности боёв
- Демонстрации механики новым игрокам

## Примеры использования

```javascript
const { Character, CombatSimulator, createWarrior, createWeakBandit } = require('./combat_simulator');

// Создание персонажей
const hero = createWarrior('Грим');
const enemies = [
  createWeakBandit('Бандит 1'),
  createWeakBandit('Бандит 2')
];

// Симуляция боя
const sim = new CombatSimulator();
const winner = sim.simulateCombat([hero], enemies);

console.log(`Победитель: команда ${winner}`);
```

## Механика системы

### HP
- Формула: (ST + HT) × 2
- Персонажи героев: 32-40 HP
- Рядовые враги: 10 HP

### Урон
- Ближний бой: ST/3 + бонус оружия - броня
- Типичный урон: 3-5 за удар

### Защита
- Уклонение: базовая защита + 3
- Успешная защита полностью блокирует урон

### Штрафы за ранения
- > 75% HP: без штрафов
- > 50% HP: -1 ко всем действиям
- > 25% HP: -2 ко всем действиям
- ≤ 25% HP: -3 ко всем действиям
